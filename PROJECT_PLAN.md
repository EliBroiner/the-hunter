# 📋 The Hunter - תוכנית פיתוח מלאה

---

## 🎯 מהות האפליקציה

**The Hunter** - אפליקציה לחיפוש חכם בקבצים במכשיר.

המשתמש יכול למצוא כל קובץ (תמונה, PDF, מסמך) לפי:
- שם הקובץ
- תוכן הקובץ (טקסט מתוך תמונות/PDF)
- תאריכים
- שפה טבעית (Premium)

---

## 👥 סוגי משתמשים

### משתמש רגיל (חינם)
- חיפוש בסיסי בשם קובץ ותוכן
- סינון לפי תאריכים (מ-עד)
- סינון לפי סוג קובץ
- תיקיות סריקה בסיסיות (Downloads, Screenshots)
- מילים נרדפות עברית-אנגלית

### משתמש Premium (₪14.90/חודש)
כל מה שיש לרגיל, ובנוסף:
- 🎤 חיפוש קולי (דיבור לטקסט)
- 🤖 חיפוש חכם AI (שפה טבעית)
- 📁 בחירת תיקיות מותאמת אישית
- 🎁 חודש ניסיון חינם

---

## 📱 מסכי האפליקציה

### מסך 1: התחברות
```
┌─────────────────────────────────────────────┐
│                                             │
│              🎯 The Hunter                  │
│         מצא כל קובץ בשניות                 │
│                                             │
│  ┌─────────────────────────────────────┐   │
│  │     🔵 המשך עם Google               │   │
│  └─────────────────────────────────────┘   │
│                                             │
│           או המשך כאורח                    │
│      (ללא סנכרון בין מכשירים)              │
│                                             │
└─────────────────────────────────────────────┘
```
**פעולות:**
- התחברות עם Google (Firebase Auth)
- אפשרות להמשיך כאורח (ללא Premium)

---

### מסך 2: חיפוש (ראשי) - משתמש רגיל
```
┌─────────────────────────────────────────────┐
│  ┌─────────────────────────────────────┐   │
│  │ 🔍 חיפוש...                    🔒🎤│   │
│  └─────────────────────────────────────┘   │
│                                             │
│  📅 מתאריך          📅 עד תאריך            │
│  ┌──────────┐       ┌──────────┐           │
│  │ בחר...   │       │ בחר...   │           │
│  └──────────┘       └──────────┘           │
│                                             │
│  [הכל] [תמונות] [PDF] [מסמכים] [עם טקסט]   │
├─────────────────────────────────────────────┤
│  ╔═════════════════════════════════════╗   │
│  ║  ✨ שדרג לפרימיום                   ║   │
│  ║  חיפוש קולי + AI + תיקיות מותאמות  ║   │
│  ║  🎁 חודש ראשון חינם                 ║   │
│  ╚═════════════════════════════════════╝   │
├─────────────────────────────────────────────┤
│  📄 קובץ1.pdf                              │
│     📁 Downloads · 2.3 MB · 15/01/2025     │
│                                             │
│  🖼️ תמונה2.jpg                             │
│     📁 WhatsApp · 1.1 MB · 14/01/2025      │
│     "טקסט שחולץ מהתמונה..."               │
│                                             │
└────────────────────────────────[⚙️]─────────┘
```

**פעולות:**
- חיפוש טקסט רגיל
- בחירת תאריכים מ-עד (DatePicker)
- סינון לפי סוג
- לחיצה על 🎤 → מראה הודעה "רק ל-Premium"
- לחיצה על באנר → מעבר למסך Premium
- לחיצה על ⚙️ → מעבר להגדרות

---

### מסך 2: חיפוש (ראשי) - משתמש Premium
```
┌─────────────────────────────────────────────┐
│  ┌─────────────────────────────────────┐   │
│  │ 🔍 חיפוש חכם...              🎤🟢 │   │
│  │ "מצא קבלות מהחודש האחרון"         │   │
│  └─────────────────────────────────────┘   │
│                                             │
│  📅 מתאריך          📅 עד תאריך            │
│  ┌──────────┐       ┌──────────┐           │
│  │01/12/2024│       │25/01/2025│           │
│  └──────────┘       └──────────┘           │
│                                             │
│  [הכל] [תמונות] [PDF] [מסמכים] [עם טקסט]   │
├─────────────────────────────────────────────┤
│  🤖 AI הבין:                               │
│  מילות חיפוש: קבלה, receipt, חשבונית       │
│  תקופה: 25/12/2024 - 25/01/2025            │
├─────────────────────────────────────────────┤
│  📄 קבלה_סופר.pdf                          │
│     📁 Downloads · 0.5 MB · 20/01/2025     │
│     "סופר יודה - סה"כ 156.90 ש"ח"         │
│                                             │
│  🖼️ WhatsApp Image.jpg                     │
│     📁 WhatsApp · 1.1 MB · 18/01/2025      │
│     "קבלה מספר 12345..."                   │
│                                             │
└────────────────────────────────[⚙️]─────────┘
```

**פעולות נוספות ל-Premium:**
- לחיצה על 🎤 → מפעיל הקלטה
- טקסט חופשי נשלח ל-AI לניתוח
- הצגת מה ה-AI הבין

---

### מסך 3: הגדרות
```
┌─────────────────────────────────────────────┐
│  ←  הגדרות                                 │
├─────────────────────────────────────────────┤
│  👤 החשבון שלי                              │
│  ┌─────────────────────────────────────┐   │
│  │ user@gmail.com                      │   │
│  │ ──────────────────────────────────  │   │
│  │ 🌟 Premium עד 25/02/2025            │   │
│  │    או                               │   │
│  │ ⭐ משתמש רגיל [שדרג לפרימיום]       │   │
│  └─────────────────────────────────────┘   │
├─────────────────────────────────────────────┤
│  📁 תיקיות לסריקה                          │
│  ┌─────────────────────────────────────┐   │
│  │ ☑️ Downloads           1,234 קבצים │   │
│  │ ☑️ Screenshots           456 קבצים │   │
│  │ ☐ WhatsApp Media      12,345 קבצים │   │
│  │ ☐ DCIM                 3,456 קבצים │   │
│  │ ☐ Pictures             2,100 קבצים │   │
│  │ ☐ Documents              890 קבצים │   │
│  │ ────────────────────────────────── │   │
│  │ 🔒 תיקיה מותאמת (Premium)          │   │
│  └─────────────────────────────────────┘   │
│                                             │
│  [     🔄 סרוק עכשיו      ]                │
├─────────────────────────────────────────────┤
│  📊 סטטיסטיקות                             │
│  ┌─────────────────────────────────────┐   │
│  │ קבצים במסד: 5,432                   │   │
│  │ קבצים עם טקסט: 1,234                │   │
│  │ גודל כולל: 2.3 GB                   │   │
│  │ סריקה אחרונה: היום 14:30            │   │
│  └─────────────────────────────────────┘   │
├─────────────────────────────────────────────┤
│  ℹ️ על האפליקציה                           │
│  📧 צור קשר                                │
│  🚪 התנתק                                  │
└─────────────────────────────────────────────┘
```

---

### מסך 4: שדרוג ל-Premium
```
┌─────────────────────────────────────────────┐
│  ←                                          │
│                                             │
│           ✨ The Hunter Premium             │
│                                             │
├─────────────────────────────────────────────┤
│                                             │
│  🎤 חיפוש קולי                             │
│  ┌─────────────────────────────────────┐   │
│  │ דבר במקום להקליד. המערכת תזהה      │   │
│  │ את מה שאמרת ותחפש אוטומטית.        │   │
│  └─────────────────────────────────────┘   │
│                                             │
│  🤖 חיפוש חכם AI                           │
│  ┌─────────────────────────────────────┐   │
│  │ כתוב בשפה חופשית:                   │   │
│  │ "קבלות מהחודש האחרון"               │   │
│  │ "ביטוח רכב מ-2024"                  │   │
│  │ והמערכת תבין ותמצא.                 │   │
│  └─────────────────────────────────────┘   │
│                                             │
│  📁 תיקיות מותאמות                         │
│  ┌─────────────────────────────────────┐   │
│  │ בחר בדיוק אילו תיקיות לסרוק.        │   │
│  │ חסוך זמן ומקום.                     │   │
│  └─────────────────────────────────────┘   │
│                                             │
├─────────────────────────────────────────────┤
│                                             │
│           ₪14.90 / חודש                    │
│                                             │
│  ┌─────────────────────────────────────┐   │
│  │                                     │   │
│  │   🎁 התחל חודש ניסיון חינם          │   │
│  │                                     │   │
│  └─────────────────────────────────────┘   │
│                                             │
│       ביטול בכל עת · ללא התחייבות          │
│                                             │
└─────────────────────────────────────────────┘
```

---

## 🏗️ ארכיטקטורה טכנית

```
┌─────────────────────────────────────────────────────────────┐
│                        האפליקציה                            │
│                     (Flutter/Dart)                          │
├──────────────────────┬──────────────────────────────────────┤
│   חיפוש מקומי        │        חיפוש חכם (Premium)           │
│   ─────────────      │        ──────────────────            │
│   • Isar DB          │        • Firebase Cloud Function     │
│   • OCR (ML Kit)     │        • Gemini AI                   │
│   • PDF Text         │        • Voice (Speech to Text)      │
└──────────────────────┴──────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                     Firebase Services                        │
├─────────────────┬─────────────────┬─────────────────────────┤
│  Firebase Auth  │   Firestore     │   Cloud Functions       │
│  ─────────────  │   ─────────     │   ───────────────       │
│  • Google       │   • Users       │   • smartSearch()       │
│    Sign-In      │   • Premium     │   • Gemini proxy        │
│  • Anonymous    │     status      │   • Secure API key      │
└─────────────────┴─────────────────┴─────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                      RevenueCat                              │
│                   (ניהול מנויים)                            │
├─────────────────────────────────────────────────────────────┤
│  • Google Play Billing                                       │
│  • Webhooks → Firestore                                      │
│  • Trial period (30 days)                                    │
│  • Subscription management                                   │
└─────────────────────────────────────────────────────────────┘
```

---

## 📁 מבנה הקבצים

```
lib/
├── main.dart
├── models/
│   ├── file_metadata.dart
│   └── user_model.dart              # חדש
├── screens/
│   ├── splash_screen.dart           # חדש - מסך טעינה
│   ├── login_screen.dart            # חדש - התחברות
│   ├── search_screen.dart           # מעודכן
│   ├── settings_screen.dart         # חדש - הגדרות
│   └── premium_screen.dart          # חדש - שדרוג
├── services/
│   ├── database_service.dart
│   ├── file_scanner_service.dart
│   ├── ocr_service.dart
│   ├── text_extraction_service.dart
│   ├── auth_service.dart            # חדש - Firebase Auth
│   ├── premium_service.dart         # חדש - RevenueCat
│   └── ai_search_service.dart       # חדש - Gemini
└── widgets/
    ├── date_range_picker.dart       # חדש
    ├── premium_banner.dart          # חדש
    ├── folder_selector.dart         # חדש
    └── voice_search_button.dart     # חדש
```

---

## 🔄 שלבי פיתוח

### שלב 1: UI בסיסי (ללא Firebase)
- [ ] הוספת בוחר תאריכים (מ-עד) למסך חיפוש
- [ ] יצירת מסך הגדרות בסיסי
- [ ] בחירת תיקיות לסריקה (UI)
- [ ] שמירת הגדרות מקומית (SharedPreferences)
- [ ] כפתור מיקרופון נעול (מראה "Premium")

### שלב 2: Firebase Auth
- [ ] הגדרת פרויקט Firebase
- [ ] הוספת Firebase Auth לאפליקציה
- [ ] מסך התחברות (Google Sign-In)
- [ ] אפשרות אורח
- [ ] שמירת משתמש ב-Firestore

### שלב 3: Premium + RevenueCat
- [ ] הגדרת RevenueCat
- [ ] יצירת מוצר מנוי ב-Google Play Console
- [ ] מסך שדרוג ל-Premium
- [ ] בדיקת סטטוס Premium
- [ ] חסימת תכונות לפי סטטוס
- [ ] חודש ניסיון חינם

### שלב 4: חיפוש חכם (AI)
- [ ] יצירת Cloud Function
- [ ] אינטגרציה עם Gemini API
- [ ] Prompt מותאם לחיפוש
- [ ] הצגת תוצאות AI ב-UI
- [ ] הפעלת חיפוש קולי (Premium)

### שלב 5: ליטוש ובדיקות
- [ ] טיפול בשגיאות
- [ ] מצבי טעינה
- [ ] בדיקות על מכשירים שונים
- [ ] אופטימיזציה

---

## 💰 עלויות פרויקט

| פריט | עלות | הערות |
|------|------|-------|
| Google Play Console | $25 | חד פעמי, לפרסום |
| Firebase | $0 | חינם לשימוש סביר |
| RevenueCat | $0 | חינם עד $2.5K/חודש |
| Gemini API | $0 | חינם 60 req/min |
| **סה"כ התחלתי** | **$25** | |

---

## ✅ מה כבר קיים

- [x] סריקת תיקיות
- [x] חילוץ טקסט מתמונות (OCR)
- [x] חילוץ טקסט מ-PDF
- [x] חילוץ טקסט מקבצי טקסט
- [x] חיפוש בסיסי
- [x] מילים נרדפות עברית-אנגלית
- [x] סינון לפי סוג קובץ
- [x] עיצוב מודרני
- [x] סריקה אוטומטית בהפעלה

---

## 💳 זרימת תשלום

```
┌─────────────┐    תשלום    ┌─────────────┐    העברה    ┌─────────────┐
│   משתמש     │ ──────────► │   Google    │ ──────────► │    אתה      │
│             │   ₪14.90    │   Play      │   ₪12.70    │  (המפתח)   │
└─────────────┘             └─────────────┘             └─────────────┘
                                  │
                            עמלה 15%
```

1. משתמש לוחץ "הפוך לפרימיום" באפליקציה
2. נפתח חלון תשלום של Google Play
3. משתמש משלם עם כרטיס אשראי / Google Pay
4. Google לוקח עמלה (15% בשנה הראשונה)
5. המפתח מקבל את השאר לחשבון בנק

---

## 🔐 אבטחה

- API Keys נשמרים ב-Firebase (לא באפליקציה)
- Cloud Functions מטפלות בבקשות ל-Gemini
- בדיקת Premium בצד השרת (לא ניתן לעקוף)
- Firebase Auth מנהל הזדהות מאובטחת
